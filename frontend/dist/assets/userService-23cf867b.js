import{a as c}from"./index-dc2b6df4.js";import"./query-4c6e04e8.js";import"./vendor-280e31ee.js";import"./redux-9afd89d7.js";import"./router-37397ff9.js";class u{async getUsers(s={}){var o,r,a,d,i,n;try{const t=new URLSearchParams;s.page&&t.append("page",s.page.toString()),s.limit&&t.append("limit",s.limit.toString()),s.search&&t.append("search",s.search),s.role&&t.append("role",s.role);const e=await c.get(`/users?${t.toString()}`);if(e.data.success&&e.data.data)return{users:e.data.data,meta:{page:((o=e.data.meta)==null?void 0:o.page)||s.page||1,limit:((r=e.data.meta)==null?void 0:r.limit)||s.limit||20,total:((a=e.data.meta)==null?void 0:a.total)||e.data.data.length,totalPages:((d=e.data.meta)==null?void 0:d.totalPages)||1}};throw new Error(e.data.message||"Failed to fetch users")}catch(t){const e=((n=(i=t.response)==null?void 0:i.data)==null?void 0:n.message)||t.message||"Failed to fetch users";throw new Error(e)}}async createUser(s){var o,r,a,d,i,n;try{const t=await c.post("/users/create",s);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.message||"Failed to create user")}catch(t){if(((r=(o=t.response)==null?void 0:o.data)==null?void 0:r.message)==="Validation failed"&&((d=(a=t.response)==null?void 0:a.data)!=null&&d.data)){const m=t.response.data.data.map(l=>`${l.field}: ${l.message}`).join(", ");throw new Error(`Validation failed: ${m}`)}const e=((n=(i=t.response)==null?void 0:i.data)==null?void 0:n.message)||t.message||"Failed to create user";throw new Error(e)}}async getUserById(s){var o,r;try{const a=await c.get(`/users/${s}`);if(a.data.success&&a.data.data)return a.data.data;throw new Error(a.data.message||"Failed to fetch user")}catch(a){const d=((r=(o=a.response)==null?void 0:o.data)==null?void 0:r.message)||a.message||"Failed to fetch user";throw new Error(d)}}async updateUser(s,o){var r,a,d,i,n,t;try{const e=await c.put(`/users/${s}`,o);if(e.data.success&&e.data.data)return e.data.data;throw new Error(e.data.message||"Failed to update user")}catch(e){if(((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)==="Validation failed"&&((i=(d=e.response)==null?void 0:d.data)!=null&&i.data)){const l=e.response.data.data.map(p=>`${p.field}: ${p.message}`).join(", ");throw new Error(`Validation failed: ${l}`)}const g=((t=(n=e.response)==null?void 0:n.data)==null?void 0:t.message)||e.message||"Failed to update user";throw new Error(g)}}async deleteUser(s){var o,r;try{const a=await c.delete(`/users/${s}`);if(!a.data.success)throw new Error(a.data.message||"Failed to delete user")}catch(a){const d=((r=(o=a.response)==null?void 0:o.data)==null?void 0:r.message)||a.message||"Failed to delete user";throw new Error(d)}}}const $=new u;export{$ as default,$ as userService};
//# sourceMappingURL=userService-23cf867b.js.map
